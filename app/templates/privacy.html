{% extends "layout.html" %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Encabezado -->
            <div class="card shadow-lg border-0 mb-4">
                <div class="card-body bg-gradient-primary text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <h1 class="display-4 mb-3">üîí Pol√≠tica de Privacidad y Protecci√≥n de Datos</h1>
                    <p class="lead mb-0">PreIncubadora AI - Cumplimiento GDPR/LPD</p>
                    <p class="small mb-0">Versi√≥n 1.0 - √öltima actualizaci√≥n: Enero 2026</p>
                </div>
            </div>

            <!-- Secci√≥n 1: Informaci√≥n General -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h2 class="h4 mb-0">üìã 1. Informaci√≥n General</h2>
                </div>
                <div class="card-body">
                    <p><strong>PreIncubadora AI</strong> es un sistema self-hosted de an√°lisis de viabilidad de ideas de negocio que utiliza inteligencia artificial.</p>
                    
                    <div class="alert alert-info">
                        <strong>üí° Responsable de Tratamiento:</strong> El propietario de esta instancia self-hosted es el √∫nico responsable del tratamiento de datos personales bajo el modelo de <strong>Responsabilidad √önica</strong>.
                    </div>

                    <h5 class="mt-4">Datos que Recolectamos:</h5>
                    <ul>
                        <li><strong>Datos de Registro:</strong> Email, RUT (identificador √∫nico chileno), contrase√±a hasheada</li>
                        <li><strong>Datos de Proyecto:</strong> Ideas de negocio y an√°lisis generados</li>
                        <li><strong>Datos de Auditor√≠a:</strong> IP, timestamp, acciones realizadas</li>
                        <li><strong>Consentimiento:</strong> Fecha/hora, IP y versi√≥n de t√©rminos aceptados</li>
                    </ul>
                </div>
            </div>

            <!-- Secci√≥n 2: Uso de Datos -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h2 class="h4 mb-0">üéØ 2. Finalidad y Uso de Datos</h2>
                </div>
                <div class="card-body">
                    <h5>Tus datos se utilizan EXCLUSIVAMENTE para:</h5>
                    <ol>
                        <li><strong>Generaci√≥n de Reportes de Viabilidad:</strong> Procesamos tu idea de negocio mediante API de Google Gemini para generar an√°lisis bajo los 9 Pilares de Viabilidad</li>
                        <li><strong>Contacto Comercial:</strong> Podemos contactarte con fines de consultor√≠a empresarial relacionada con tu proyecto</li>
                        <li><strong>Auditor√≠a y Seguridad:</strong> Registramos acciones para cumplimiento normativo y prevenci√≥n de abuso</li>
                    </ol>

                    <div class="alert alert-warning">
                        <strong>‚ö†Ô∏è Procesamiento Externo - Google Gemini AI:</strong><br>
                        Tu idea de negocio se procesa mediante la API de Google Gemini (generative AI). Seg√∫n la pol√≠tica de Google:
                        <ul class="mb-0 mt-2">
                            <li>Los datos enviados a trav√©s de la API <strong>NO</strong> se utilizan para entrenar modelos p√∫blicos de IA</li>
                            <li>Google act√∫a como <strong>procesador de datos</strong>, no como controlador</li>
                            <li>Los datos se transmiten cifrados (TLS 1.2/1.3)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 3: Seguridad -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h2 class="h4 mb-0">üõ°Ô∏è 3. Medidas de Seguridad Implementadas</h2>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Encriptaci√≥n:</h5>
                            <ul>
                                <li>‚úÖ HTTPS obligatorio (TLS 1.2/1.3)</li>
                                <li>‚úÖ Passwords hasheadas con Bcrypt (work factor 12)</li>
                                <li>‚úÖ Transmisi√≥n cifrada a APIs externas</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5>Control de Acceso:</h5>
                            <ul>
                                <li>‚úÖ Rate limiting (60 req/min)</li>
                                <li>‚úÖ Protecci√≥n anti-Prompt Injection</li>
                                <li>‚úÖ L√≠mite de 10 mensajes por sesi√≥n</li>
                                <li>‚úÖ Auditor√≠a completa de acciones</li>
                            </ul>
                        </div>
                    </div>

                    <div class="alert alert-success mt-3">
                        <strong>üîí Base de Datos Aislada:</strong> PostgreSQL configurado para NO aceptar conexiones externas (bind 127.0.0.1 o red interna Docker).
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 4: Derechos GDPR/LPD -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h2 class="h4 mb-0">‚öñÔ∏è 4. Tus Derechos (GDPR/LPD)</h2>
                </div>
                <div class="card-body">
                    <p>Como titular de datos personales, tienes derecho a:</p>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="border p-3 rounded h-100">
                                <h5 class="text-primary">üìÇ Acceso</h5>
                                <p class="small mb-0">Solicitar copia de todos tus datos almacenados</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="border p-3 rounded h-100">
                                <h5 class="text-primary">‚úèÔ∏è Rectificaci√≥n</h5>
                                <p class="small mb-0">Corregir datos inexactos o incompletos</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="border p-3 rounded h-100">
                                <h5 class="text-danger">üóëÔ∏è Eliminaci√≥n (Derecho al Olvido)</h5>
                                <p class="small mb-0">Solicitar eliminaci√≥n permanente de tu cuenta y datos</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="border p-3 rounded h-100">
                                <h5 class="text-warning">‚è∏Ô∏è Limitaci√≥n</h5>
                                <p class="small mb-0">Restringir el procesamiento de tus datos</p>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-danger mt-3">
                        <h5 class="alert-heading">üóëÔ∏è Derecho al Olvido - Proceso de Eliminaci√≥n:</h5>
                        <ol class="mb-0">
                            <li><strong>Soft Delete Inmediato:</strong> Al solicitar eliminaci√≥n, tu cuenta se desactiva inmediatamente</li>
                            <li><strong>Hard Delete (30 d√≠as):</strong> Tras 30 d√≠as, se ejecuta el borrado f√≠sico permanente de:
                                <ul>
                                    <li>Registro de usuario (email, RUT, contrase√±a)</li>
                                    <li>Todos los proyectos y an√°lisis generados</li>
                                    <li>Historial de chat y sesiones</li>
                                    <li>Logs de auditor√≠a asociados</li>
                                </ul>
                            </li>
                            <li><strong>Recuperaci√≥n:</strong> Tienes 30 d√≠as para cancelar la eliminaci√≥n y reactivar tu cuenta</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 5: Consentimiento -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h2 class="h4 mb-0">‚úÖ 5. Consentimiento Informado</h2>
                </div>
                <div class="card-body">
                    <p>Al registrarte en PreIncubadora AI, se te solicitar√° consentimiento expl√≠cito mediante checkbox <strong>NO pre-marcado</strong> con el siguiente texto:</p>
                    
                    <div class="border-start border-primary border-5 bg-light p-4 my-3">
                        <p class="mb-0"><em>"Autorizo el uso de mis datos para la generaci√≥n del reporte de viabilidad y para ser contactado con fines de consultor√≠a comercial. Acepto que mi idea de negocio ser√° procesada mediante la API de Google Gemini bajo las condiciones descritas en la Pol√≠tica de Privacidad."</em></p>
                    </div>

                    <p><strong>Trazabilidad:</strong> El sistema registra:</p>
                    <ul>
                        <li>üìÖ Fecha y hora exacta del consentimiento (UTC)</li>
                        <li>üåê Direcci√≥n IP desde donde se otorg√≥</li>
                        <li>üìÑ Versi√≥n de los T√©rminos y Condiciones aceptada</li>
                    </ul>
                </div>
            </div>

            <!-- Secci√≥n 6: Retenci√≥n de Datos -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h2 class="h4 mb-0">‚è∞ 6. Retenci√≥n de Datos</h2>
                </div>
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr>
                                <th>Tipo de Dato</th>
                                <th>Per√≠odo de Retenci√≥n</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Cuenta activa</td>
                                <td>Mientras la cuenta est√© activa</td>
                            </tr>
                            <tr>
                                <td>Proyectos y an√°lisis</td>
                                <td>Hasta eliminaci√≥n de cuenta</td>
                            </tr>
                            <tr>
                                <td>Logs de auditor√≠a</td>
                                <td>365 d√≠as (por requisitos legales)</td>
                            </tr>
                            <tr>
                                <td>Cuenta desactivada (soft delete)</td>
                                <td>30 d√≠as antes de hard delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Secci√≥n 7: Contacto -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h2 class="h4 mb-0">üìß 7. Contacto y Ejercicio de Derechos</h2>
                </div>
                <div class="card-body">
                    <p>Para ejercer cualquiera de tus derechos o realizar consultas sobre privacidad:</p>
                    
                    <div class="alert alert-primary">
                        <strong>Responsable de Datos:</strong> Propietario de esta instancia Self-Hosted<br>
                        <strong>Email:</strong> [Configurar seg√∫n instalaci√≥n]<br>
                        <strong>Tiempo de Respuesta:</strong> 30 d√≠as h√°biles m√°ximo
                    </div>

                    <p class="mb-0"><strong>Nota:</strong> Esta pol√≠tica puede actualizarse peri√≥dicamente. La versi√≥n vigente siempre estar√° disponible en <code>/privacy</code>.</p>
                </div>
            </div>

            <!-- Botones de Acci√≥n -->
            <div class="text-center mt-4 mb-5">
                {% if current_user.is_authenticated %}
                <a href="{{ url_for('dashboard') }}" class="btn btn-primary btn-lg">
                    <i class="bi bi-arrow-left"></i> Volver al Dashboard
                </a>
                {% else %}
                <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg me-2">
                    <i class="bi bi-house"></i> Inicio
                </a>
                <a href="{{ url_for('register') }}" class="btn btn-outline-primary btn-lg">
                    <i class="bi bi-person-plus"></i> Crear Cuenta
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
